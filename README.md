# Kontextè¶…çº§æç¤ºè¯

**[ğŸ‡¨ğŸ‡³ ä¸­æ–‡æ–‡æ¡£](#chinese-docs) | [ğŸ‡ºğŸ‡¸ English Docs](#english-docs)**

---

## <a id="chinese-docs"></a>ğŸ‡¨ğŸ‡³ ä¸­æ–‡æ–‡æ¡£

**å¤šæ¨¡æ€AIè¶…çº§æç¤ºè¯ç”Ÿæˆç³»ç»Ÿ** - æ™ºèƒ½çš„è§†è§‰æç¤ºè¯ç”Ÿæˆç³»ç»Ÿï¼Œä¸ºComfyUIæä¾›**å¯è§†åŒ–æ ‡æ³¨**ä¸**ç»“æ„åŒ–æç¤ºè¯ç”Ÿæˆ**çš„å®Œç¾ç»“åˆï¼Œä¸“ä¸ºFlux Kontextå·¥ä½œæµä¼˜åŒ–ã€‚è¿™æ˜¯ä¸€ä¸ªé©å‘½æ€§çš„**å¤šæ¨¡æ€AIè¶…çº§æç¤ºè¯ç•Œé¢**ï¼Œå°†è§†è§‰ç†è§£ä¸æ–‡æœ¬ç”Ÿæˆæ— ç¼é›†æˆã€‚

## ğŸ¯ æ•ˆæœå±•ç¤º

| ä½¿ç”¨å‰ | ä½¿ç”¨å |
|--------|--------|
| ![Before](images/before.png) | ![After](images/after.png) |
| ä¼ ç»Ÿæ–‡æœ¬æç¤ºè¯è¾“å…¥ | å¤šæ¨¡æ€å¯è§†åŒ–æç¤ºè¯ç”Ÿæˆ |

### ğŸ’« å¿«é€Ÿä¸Šæ‰‹

1. **åŒå‡»èŠ‚ç‚¹** â†’ æ‰“å¼€å¯è§†åŒ–ç¼–è¾‘å™¨
2. **ç»˜åˆ¶æ ‡æ³¨** â†’ é€‰æ‹©å·¥å…·æ ‡è®°ç›®æ ‡åŒºåŸŸ  
3. **é€‰æ‹©æ¨¡æ¿** â†’ é€‰æ‹©æ“ä½œç±»å‹å’Œå¢å¼ºæç¤ºè¯
4. **ä¸€é”®ç”Ÿæˆ** â†’ è‡ªåŠ¨ç”Ÿæˆç»“æ„åŒ–æç¤ºè¯

### ğŸ¯ é¡¹ç›®ç›®æ ‡

æœ¬é¡¹ç›®æ—¨åœ¨æ„å»ºä¸€ä¸ªåŸºäº **Flux Kontext å¤§æ¨¡å‹** çš„è¶…çº§æç¤ºè¯ç”Ÿæˆç³»ç»Ÿï¼Œé€šè¿‡ç›´è§‚çš„å›¾å½¢æ ‡æ³¨ä¸æ™ºèƒ½AIå¢å¼ºçš„ååŒæ§åˆ¶ï¼Œå®ç°å¯¹å›¾åƒçš„ç²¾ç»†åŒ–ã€å¤šæ¨¡æ€ç¼–è¾‘ã€‚

ç”¨æˆ·æ— éœ€æŒæ¡å¤æ‚çš„æç¤ºè¯ç¼–å†™ï¼Œä»…éœ€ **æ¡†é€‰å›¾åƒåŒºåŸŸ + æè¿°æ„å›¾**ï¼Œè¶…çº§æç¤ºè¯ç³»ç»Ÿå³å¯è‡ªåŠ¨ç”Ÿæˆæ™ºèƒ½AIå¢å¼ºçš„ç»“æ„åŒ–ç¼–è¾‘æŒ‡ä»¤ï¼Œé©±åŠ¨ Kontext æ¨¡å‹å®Œæˆå›¾åƒå±€éƒ¨/æ•´ä½“çš„æ™ºèƒ½ä¿®æ”¹æ“ä½œã€‚

æœ¬é¡¹ç›®åŠ›æ±‚å®ç°ï¼š

ğŸ–¼ï¸ **æ‰€è§å³æ‰€å¾—çš„å¯è§†åŒ–äº¤äº’**ï¼šæ”¯æŒçŸ©å½¢ã€åœ†å½¢ã€ç®­å¤´ã€è‡ªç”±ç»˜å›¾ç­‰å¤šç§æ ‡æ³¨æ–¹å¼ï¼›

âœï¸ **ç»“æ„åŒ–æç¤ºè¯è‡ªåŠ¨æ‹¼æ¥ä¸è¡¥å…¨**ï¼šå¸®åŠ©å°ç™½ç”¨æˆ·é«˜æ•ˆè¡¨è¾¾ç¼–è¾‘éœ€æ±‚ï¼›

ğŸ§  **ç»“åˆå¤§æ¨¡å‹çš„è¯­ä¹‰ç†è§£èƒ½åŠ›**ï¼šç²¾ç¡®æ§åˆ¶å›¾åƒçš„å˜æ¢ã€æ›¿æ¢ã€ä¿®å¤ä¸å¢å¼ºï¼›

ğŸ”„ **ç¼–è¾‘é—­ç¯å®Œæ•´æ‰“é€š**ï¼šä»æ ‡æ³¨ â†’ ç”Ÿæˆæ©ç  â†’ æç¤ºç”Ÿæˆ â†’ ç¼–è¾‘æ‰§è¡Œ â†’ å›æ˜¾åé¦ˆï¼Œå…¨æµç¨‹è‡ªåŠ¨è”åŠ¨ã€‚

ç›®æ ‡æ˜¯æ‰“é€ ä¸€ä¸ªé€‚ç”¨äº **ComfyUI å›¾åƒåˆ›ä½œç”Ÿæ€** çš„è¶…çº§æç¤ºè¯ç”Ÿæˆå¹³å°ï¼Œä¸º AI å›¾åƒç¼–è¾‘æä¾›æ›´åŠ æ™ºèƒ½ã€è‡ªç„¶ã€é«˜æ•ˆçš„äº¤äº’æ–¹å¼ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

#### ğŸ¨ è§†è§‰æ ‡æ³¨ç³»ç»Ÿ
- **4ç§ç»˜åˆ¶å·¥å…·**ï¼šçŸ©å½¢ã€åœ†å½¢ã€ç®­å¤´ã€è‡ªç”±ç»˜åˆ¶å¤šè¾¹å½¢
- **å¤šè‰²å½©æ”¯æŒ**ï¼šçº¢ã€ç»¿ã€é»„ã€è“æ ‡æ³¨é¢œè‰²
- **äº¤äº’å¼ç¼–è¾‘**ï¼šç‚¹å‡»ã€æ‹–æ‹½ã€é€‰æ‹©ã€åˆ é™¤æ ‡æ³¨
- **å®æ—¶é¢„è§ˆ**ï¼šå›¾åƒä¸Šçš„å®æ—¶æ ‡æ³¨æ¸²æŸ“

#### ğŸ“ å¤šæ¨¡æ€ç»“æ„åŒ–æç¤ºè¯ç”Ÿæˆ
- **4ä¸ªæ¨¡æ¿åˆ†ç±»**ï¼šå±€éƒ¨ç¼–è¾‘ã€å…¨å±€è°ƒæ•´ã€æ–‡å­—ç¼–è¾‘ã€ä¸“ä¸šæ“ä½œ
- **49ä¸ªåŸºç¡€æ¨¡æ¿**ï¼šåŸºäº1025æ¡Flux Kontextå®˜æ–¹æŒ‡ä»¤ç²¾å¿ƒä¼˜åŒ–
- **AIæ™ºèƒ½æ‰©å±•**ï¼šé€šè¿‡Ollama/APIå¢å¼ºå™¨å¯ç”Ÿæˆæ— é™å˜ä½“
- **å¤šé€‰æç¤ºè¯**ï¼šçº¦æŸæ€§å’Œä¿®é¥°æ€§æç¤ºè¯çš„å¤é€‰æ¡†ç•Œé¢
- **æ™ºèƒ½ç»„åˆ**ï¼šè‡ªåŠ¨å°†è§†è§‰æ ‡æ³¨è½¬æ¢ä¸ºå¤šæ¨¡æ€AIå¯ç†è§£çš„ç»“æ„åŒ–æç¤ºè¯


### ğŸš€ å·²å®ç°åŠŸèƒ½

#### âœ… æ ¸å¿ƒåŠŸèƒ½
- [x] **å¯è§†åŒ–æç¤ºè¯ç¼–è¾‘å™¨èŠ‚ç‚¹** - åŒå‡»æ‰“å¼€ç»Ÿä¸€ç•Œé¢
- [x] **å¤šå·¥å…·æ ‡æ³¨** - çŸ©å½¢ã€åœ†å½¢ã€ç®­å¤´ã€è‡ªç”±ç»˜åˆ¶
- [x] **4åˆ†ç±»æ¨¡æ¿ç³»ç»Ÿ** - å±€éƒ¨/å…¨å±€/æ–‡å­—/ä¸“ä¸šæ“ä½œ
- [x] **å¤šé€‰æç¤ºè¯å¢å¼º** - çº¦æŸæ€§/ä¿®é¥°æ€§æç¤ºè¯å¤é€‰æ¡†ç•Œé¢
- [x] **å®æ—¶æ¨¡æ¿åˆ‡æ¢** - æ“ä½œç±»å‹åˆ‡æ¢ç«‹å³æ›´æ–°æç¤ºè¯é€‰é¡¹
- [x] **ç»“æ„åŒ–è¾“å‡ºç”Ÿæˆ** - è‡ªåŠ¨æ„å»ºåŒ…å«é€‰ä¸­å¢å¼ºè¯çš„æç¤ºè¯
- [x] **å›¾åƒæ¸²æŸ“** - æ ‡æ³¨ç›´æ¥æ¸²æŸ“åˆ°è¾“å‡ºå›¾åƒ

#### âœ… AIå¢å¼ºåŠŸèƒ½ (NEW!)
- [x] **ğŸ¤– æœ¬åœ°OllamaæœåŠ¡é›†æˆ** - æ”¯æŒè°ƒç”¨æœ¬åœ°ollamaæœåŠ¡ç”Ÿæˆç»“æ„åŒ–æç¤ºè¯
- [x] **ğŸŒ APIè¿œç¨‹è°ƒç”¨** - æ”¯æŒAPIè¿œç¨‹è°ƒç”¨å¤§è¯­è¨€æ¨¡å‹ç”Ÿæˆç»“æ„åŒ–æç¤ºè¯
- [x] **ğŸ¯ å¤šå›¾å±‚æŒ‡ä»¤æ”¯æŒ** - æ”¯æŒå¯¹å¤šå›¾å±‚ä½¿ç”¨ä¸åŒæŒ‡ä»¤ï¼Œä¾‹å¦‚ï¼šåœ¨çº¢è‰²æ ‡è®°å¤„æ·»åŠ ä¸€åªå°ç‹—ï¼Œç§»é™¤è“è‰²æ ‡è®°å¤„çš„æ¤…å­ç­‰
- [x] **ğŸ“‹ æ™ºèƒ½æ¨¡æ¿åº“** - æ ¹æ®FLUXå®˜æ–¹è®­ç»ƒæ•°æ®é›†ä¼˜åŒ–æç¤ºè¯æ¨¡æ¿è¦†ç›–å±€éƒ¨ç¼–è¾‘ï¼Œå…¨å±€ç¼–è¾‘ï¼Œæ–‡å­—ç¼–è¾‘ï¼Œä¸“ä¸šæ“ä½œ70+é¢„è®¾æ¨¡æ¿
- [x] **ğŸ² ç§å­å‚æ•°æ§åˆ¶** - æ”¯æŒseedå‚æ•°æ§åˆ¶ç”Ÿæˆéšæœºæ€§ï¼Œç¡®ä¿ç»“æœå¯é‡ç°
- [x] **âœï¸ ç”¨æˆ·è‡ªå®šä¹‰æ¨¡æ¿** - å®Œæ•´çš„è‡ªå®šä¹‰å¼•å¯¼è¯æœ¯ä¿å­˜/åŠ è½½/ç®¡ç†ç³»ç»Ÿ
- [x] **ğŸ§¹ è¾“å‡ºæ¸…ç†** - æ™ºèƒ½æ¸…ç†æŠ€æœ¯åˆ†æå†…å®¹ï¼Œè¾“å‡ºç®€æ´è‡ªç„¶è¯­è¨€æŒ‡ä»¤
- [x] **ğŸ”„ æ‰‹åŠ¨åˆ·æ–°æ¨¡å‹** - ä¸€é”®åˆ·æ–°Ollamaæ¨¡å‹åˆ—è¡¨ï¼Œæ— éœ€é‡å¯ComfyUI
- [x] **DeepSeek R1/V3 æ”¯æŒ** - æœ€æ–°æ¨ç†ä¼˜åŒ–æ¨¡å‹é›†æˆ
- [x] **å¤šæœåŠ¡å•†æ”¯æŒ** - SiliconFlowã€DeepSeekã€åƒé—®ã€OpenAI
- [x] **æˆæœ¬æ§åˆ¶** - æ™ºèƒ½ç¼“å­˜å’Œå®æ—¶æˆæœ¬ç›‘æ§

#### ğŸš€ æ¨¡å‹è®­ç»ƒè¿›å±•
- [x] **åŸºäºdeepseek-r1å’Œqwen3ç”¨äºç”Ÿæˆkontextæç¤ºè¯çš„æ¨¡å‹æ­£åœ¨è®­ç»ƒä¸­**â€¦â€¦

#### ğŸŒŸ ä»™å®«äº‘é•œåƒä½“éªŒ
**ä»™å®«äº‘é•œåƒå·²éƒ¨ç½²å®Œæˆä»¥ä¸ŠåŠŸèƒ½**ï¼š[https://www.xiangongyun.com/register/FIP8MJ](https://www.xiangongyun.com/register/FIP8MJ)ï¼ˆæœç´¢ï¼šå°çº¢çŒªï¼‰

#### ğŸ“ˆ è®¡åˆ’ä¸­çš„é«˜çº§åŠŸèƒ½  
- [ ] **æ ‡æ³¨æ•°æ®å¯¼å‡º** - JSONæ ¼å¼çš„åæ ‡å’Œå…ƒæ•°æ®
- [ ] **å¤šè¯­è¨€æ”¯æŒ** - ä¸­è‹±æ–‡ç•Œé¢å…ƒç´ 

#### âœ… ç”¨æˆ·ä½“éªŒ
- [x] **ç›´è§‚ç•Œé¢** - å·¦ä¾§ç”»å¸ƒï¼Œå³ä¾§æç¤ºè¯é¢æ¿å¸ƒå±€
- [x] **å“åº”å¼è®¾è®¡** - è‡ªåŠ¨ç¼©æ”¾å’Œç¼©æ”¾æ§åˆ¶

### ğŸ“‹ æ¨¡æ¿åˆ†ç±»

| åˆ†ç±» | æ¨¡æ¿æ•°é‡ | æè¿° |
|------|----------|------|
| ğŸ¯ **å±€éƒ¨ç¼–è¾‘** | 18ä¸ªæ¨¡æ¿ | ç‰¹å®šå¯¹è±¡ç¼–è¾‘ï¼ˆé¢œè‰²ã€æ ·å¼ã€çº¹ç†ã€å§¿åŠ¿ç­‰ï¼‰ |
| ğŸŒ **å…¨å±€è°ƒæ•´** | 12ä¸ªæ¨¡æ¿ | æ•´ä½“å›¾åƒå¤„ç†ï¼ˆè°ƒè‰²ã€å¢å¼ºã€æ»¤é•œï¼‰ |
| ğŸ“ **æ–‡å­—ç¼–è¾‘** | 5ä¸ªæ¨¡æ¿ | æ–‡å­—æ“ä½œï¼ˆæ·»åŠ ã€åˆ é™¤ã€ç¼–è¾‘ã€è°ƒæ•´å¤§å°ã€ç»„åˆï¼‰ |
| ğŸ”§ **ä¸“ä¸šæ“ä½œ** | 14ä¸ªæ¨¡æ¿ | é«˜çº§ç¼–è¾‘ï¼ˆå‡ ä½•å˜æ¢ã€åˆæˆç­‰ï¼‰ |
| âœï¸ **è‡ªå®šä¹‰æ¨¡æ¿** | æ— é™åˆ¶ | ç”¨æˆ·è‡ªå®šä¹‰AIå¼•å¯¼è¯æœ¯ï¼Œæ”¯æŒä¿å­˜/åŠ è½½/ç®¡ç† |

### ğŸ”® æœªæ¥è§„åˆ’

#### ğŸ“ˆ è®¡åˆ’å¢å¼º
- [ ] **AIé©±åŠ¨æ ‡æ³¨** - è‡ªåŠ¨å¯¹è±¡æ£€æµ‹å’Œé¢„æ ‡æ³¨
- [ ] **è‡ªå®šä¹‰æ¨¡æ¿åˆ›å»ºå™¨** - ç”¨æˆ·å®šä¹‰çš„æç¤ºè¯æ¨¡æ¿
- [ ] **æ‰¹å¤„ç†** - å¤šå›¾åƒæ ‡æ³¨å·¥ä½œæµ
- [ ] **æ¨¡æ¿å¸‚åœº** - ç¤¾åŒºå…±äº«çš„æç¤ºè¯æ¨¡æ¿
- [ ] **é«˜çº§å¯¼å‡ºæ ¼å¼** - æ”¯æŒæ›´å¤šè¾“å‡ºæ ¼å¼

#### ğŸ§ª å®éªŒæ€§åŠŸèƒ½
- [ ] **è¯­éŸ³æ ‡æ³¨** - éŸ³é¢‘æè¿°è½¬æç¤ºè¯è½¬æ¢
- [ ] **3Då¯¹è±¡æ”¯æŒ** - æ·±åº¦æ„ŸçŸ¥æ ‡æ³¨å·¥å…·
- [ ] **å®æ—¶åä½œ** - å¤šç”¨æˆ·ç¼–è¾‘ä¼šè¯
- [ ] **APIé›†æˆ** - å¤–éƒ¨å·¥å…·è¿æ¥

### ğŸ“¦ å®‰è£…æ–¹æ³•

#### æ–¹æ³•ä¸€ï¼šGitå…‹éš†ï¼ˆæ¨èï¼‰
```bash
cd ComfyUI/custom_nodes/
git clone https://github.com/aiaiaikkk/kontext-super-prompt.git
```

#### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨å®‰è£…
1. å°†`KontextSuperPrompt`æ–‡ä»¶å¤¹å¤åˆ¶åˆ°ComfyUIçš„custom_nodesç›®å½•
2. é‡å¯ComfyUI
3. åœ¨`kontext_super_prompt/core`åˆ†ç±»ä¸­æ‰¾åˆ°`VisualPromptEditor`èŠ‚ç‚¹
4. åŒå‡»èŠ‚ç‚¹æ‰“å¼€å¯è§†åŒ–ç¼–è¾‘å™¨

### ğŸ® ä½¿ç”¨æ–¹æ³•

1. **æ·»åŠ èŠ‚ç‚¹**ï¼šåœ¨å·¥ä½œæµä¸­æ”¾ç½®`VisualPromptEditor`
2. **è¿æ¥å›¾åƒ**ï¼šå°†å›¾åƒè¾“å…¥è¿æ¥åˆ°èŠ‚ç‚¹
3. **æ‰“å¼€ç¼–è¾‘å™¨**ï¼šåŒå‡»èŠ‚ç‚¹å¯åŠ¨ç•Œé¢
4. **æ ‡æ³¨**ï¼šä½¿ç”¨ç»˜åˆ¶å·¥å…·æ ‡è®°æ„Ÿå…´è¶£çš„åŒºåŸŸ
5. **é…ç½®**ï¼šé€‰æ‹©æ¨¡æ¿åˆ†ç±»å’Œæ“ä½œç±»å‹
6. **å¢å¼º**ï¼šé€šè¿‡å¤é€‰æ¡†é€‰æ‹©çº¦æŸæ€§å’Œä¿®é¥°æ€§æç¤ºè¯
7. **ç”Ÿæˆ**ï¼šç‚¹å‡»"ç”Ÿæˆæè¿°"è·å¾—ç»“æ„åŒ–æç¤ºè¯
8. **å¯¼å‡º**ï¼šä¿å­˜æ ‡æ³¨å¹¶åœ¨å·¥ä½œæµä¸­ä½¿ç”¨ç”Ÿæˆçš„æç¤ºè¯

### ğŸ”§ ç³»ç»Ÿè¦æ±‚

- ComfyUIï¼ˆæ¨èæœ€æ–°ç‰ˆæœ¬ï¼‰
- Python 3.7+
- æ”¯æŒJavaScriptçš„ç°ä»£ç½‘é¡µæµè§ˆå™¨
- 4GB+å†…å­˜ä»¥è·å¾—æœ€ä½³æ€§èƒ½

### ğŸ“Š é¡¹ç›®ç»Ÿè®¡

- **é¢„è®¾æ¨¡æ¿æ•°é‡**ï¼š70+ä¸ªFLUXä¼˜åŒ–æ¨¡æ¿ï¼ˆåŸºäºå®˜æ–¹è®­ç»ƒæ•°æ®é›†ï¼‰
- **è‡ªå®šä¹‰æ¨¡æ¿**ï¼šæ— é™åˆ¶ç”¨æˆ·è‡ªå®šä¹‰å¼•å¯¼è¯æœ¯
- **AIå¢å¼ºèŠ‚ç‚¹**ï¼š2ä¸ªæ™ºèƒ½å¢å¼ºå™¨ï¼ˆOllamaæœ¬åœ° + APIè¿œç¨‹ï¼‰
- **æç¤ºè¯æ•°æ®åº“**ï¼š343ä¸ªçº¦æŸæ€§å’Œä¿®é¥°æ€§æç¤ºè¯
- **å¤šå›¾å±‚æ”¯æŒ**ï¼šæ— é™åˆ¶æ ‡æ³¨å±‚æ•°å’ŒæŒ‡ä»¤ç»„åˆ
- **è¯­è¨€æ”¯æŒ**ï¼šè‹±æ–‡/ä¸­æ–‡åŒè¯­ç•Œé¢
- **æ–‡ä»¶å¤§å°**ï¼šçº¦3.2MBå®Œæ•´åŒ…
- **èŠ‚ç‚¹æ•°é‡**ï¼š4ä¸ªæ ¸å¿ƒèŠ‚ç‚¹ï¼ˆç¼–è¾‘å™¨ + 2ä¸ªAIå¢å¼ºå™¨ + ç§å­æ§åˆ¶ï¼‰

---

## <a id="english-docs"></a>ğŸ‡ºğŸ‡¸ English Documentation

**Multimodal AI Super Prompt Generation System** - An intelligent visual prompt generation system for ComfyUI that combines **visual annotation** with **structured prompt generation**, optimized for Flux Kontext workflow. This is a revolutionary **multimodal AI super prompt interface** that seamlessly integrates visual understanding with text generation.

## ğŸ¯ Visual Demonstration

| Before | After |
|--------|-------|
| ![Before](images/before.png) | ![After](images/after.png) |
| Traditional text prompt input | Multimodal visual prompt generation |

### ğŸ’« Quick Start

1. **Double-click node** â†’ Open visual editor
2. **Draw annotations** â†’ Select tools to mark target areas
3. **Choose templates** â†’ Select operation type and enhancement prompts  
4. **Generate instantly** â†’ Auto-generate structured prompts

## ğŸ¯ Project Purpose

This project aims to build a super prompt generation system based on the **Flux Kontext large model**, achieving fine-grained, multimodal image editing through the collaborative control of intuitive graphic annotation and AI-enhanced intelligent prompts.

Users don't need to master complex prompt writing - they simply need to **select image regions + describe intentions**, and the super prompt system will automatically generate AI-enhanced structured editing instructions to drive the Kontext model to complete intelligent local/global image modifications.

This project strives to achieve:

ğŸ–¼ï¸ **WYSIWYG Visual Interaction**: Support for multiple annotation methods including rectangles, circles, arrows, and freehand drawing;

âœï¸ **Automated Structured Prompt Assembly and Completion**: Help novice users efficiently express editing requirements;

ğŸ§  **Integration with Large Model Semantic Understanding**: Precise control over image transformation, replacement, repair, and enhancement;

ğŸ”„ **Complete Editing Loop Integration**: From annotation â†’ mask generation â†’ prompt generation â†’ editing execution â†’ feedback display, full-process automatic coordination.

The goal is to create a super prompt generation platform suitable for the **ComfyUI image creation ecosystem**, providing a more intelligent, natural, and efficient interaction method for AI image editing.

## âœ¨ Key Features

### ğŸ¨ Visual Annotation System
- **4 Drawing Tools**: Rectangle, Circle, Arrow, Freehand Polygon
- **Multi-color Support**: Red, Green, Yellow, Blue annotations
- **Interactive Editing**: Click, drag, select, delete annotations
- **Real-time Preview**: Live annotation rendering on images

### ğŸ“ Multimodal Structured Prompt Generation
- **4 Template Categories**: Local Edits, Global Adjustments, Text Editing, Professional Operations
- **49 Base Templates**: Carefully optimized based on 1025 official Flux Kontext instructions
- **AI Smart Extension**: Generate unlimited variants through Ollama/API enhancers
- **Multi-select Prompts**: Checkbox interface for constraint and decorative prompts
- **Smart Combination**: Automatically convert visual annotations into multimodal AI-comprehensible structured prompts


## ğŸš€ Implemented Features

### âœ… Core Functionality
- [x] **Visual Prompt Editor Node** - Double-click to open unified interface
- [x] **Multi-tool Annotation** - Rectangle, Circle, Arrow, Freehand drawing
- [x] **4-category Template System** - Local/Global/Text/Professional operations
- [x] **Multi-select Prompt Enhancement** - Checkbox interface for constraint/decorative prompts
- [x] **Real-time Template Switching** - Operation type changes instantly update prompt options
- [x] **Structured Output Generation** - Automatic prompt construction with selected enhancements
- [x] **Image Rendering** - Annotations directly rendered to output images

### âœ… AI Enhancement Features (NEW!)
- [x] **ğŸ¤– Local Ollama Service Integration** - Support calling local ollama service to generate structured prompts
- [x] **ğŸŒ API Remote Calling** - Support API remote calling of large language models to generate structured prompts
- [x] **ğŸ¯ Multi-layer Instruction Support** - Support different instructions for multiple layers, e.g.: add a puppy at red marker, remove chair at blue marker, etc.
- [x] **ğŸ“‹ Smart Template Library** - 70+ preset templates optimized based on FLUX official training dataset covering local editing, global editing, text editing, professional operations
- [x] **ğŸ² Seed Parameter Control** - Support seed parameter to control generation randomness and ensure reproducible results
- [x] **âœï¸ Custom User Templates** - Complete custom guidance prompt save/load/management system
- [x] **ğŸ§¹ Output Cleaning** - Intelligent cleaning of technical analysis content, outputting concise natural language instructions
- [x] **ğŸ”„ Manual Model Refresh** - One-click refresh Ollama model list without restarting ComfyUI
- [x] **DeepSeek R1/V3 Support** - Latest inference optimization model integration
- [x] **Multi-provider Support** - SiliconFlow, DeepSeek, Qianwen, OpenAI
- [x] **Cost Control** - Smart caching and real-time cost monitoring

### ğŸš€ Model Training Progress
- [x] **Models based on deepseek-r1 and qwen3 for generating kontext prompts are in training**...

### ğŸŒŸ Xiangong Cloud Mirror Experience
**Xiangong Cloud Mirror has deployed all the above features**: [https://www.xiangongyun.com/register/FIP8MJ](https://www.xiangongyun.com/register/FIP8MJ) (Search: å°çº¢çŒª)

### ğŸ“ˆ Planned Advanced Features
- [ ] **Annotation Data Export** - JSON format with coordinates and metadata
- [ ] **Multi-language Support** - Chinese/English interface elements
- [ ] **Session Persistence** - Save & restore annotation states

### âœ… User Experience
- [x] **Intuitive Interface** - Left canvas, right prompt panel layout
- [x] **Responsive Design** - Auto-scaling and zoom controls

## ğŸ“‹ Template Categories

| Category | Templates | Description |
|----------|-----------|-------------|
| ğŸ¯ **Local Edits** | 18 templates | Object-specific editing (color, style, texture, pose, etc.) |
| ğŸŒ **Global Adjustments** | 12 templates | Whole image processing (color grading, enhancement, filters) |
| ğŸ“ **Text Editing** | 5 templates | Text manipulation (add, remove, edit, resize, combine) |
| ğŸ”§ **Professional Operations** | 14 templates | Advanced editing (geometric transforms, compositing, etc.) |
| âœï¸ **Custom Templates** | Unlimited | User-defined AI guidance prompts with save/load/management |

## ğŸ”® Future Roadmap

### ğŸ“ˆ Planned Enhancements
- [ ] **AI-powered Annotation** - Automatic object detection and pre-annotation
- [ ] **Custom Template Creator** - User-defined prompt templates
- [ ] **Batch Processing** - Multiple image annotation workflow
- [ ] **Template Marketplace** - Community-shared prompt templates
- [ ] **Advanced Export Formats** - Support for more output formats

### ğŸ§ª Experimental Features
- [ ] **Voice Annotation** - Audio description to prompt conversion
- [ ] **3D Object Support** - Depth-aware annotation tools
- [ ] **Real-time Collaboration** - Multi-user editing sessions
- [ ] **API Integration** - External tool connectivity

## ğŸ“¦ Installation

### Method 1: Git Clone (Recommended)
```bash
cd ComfyUI/custom_nodes/
git clone https://github.com/aiaiaikkk/kontext-super-prompt.git
```

### Method 2: Manual Installation
1. Copy the `KontextSuperPrompt` folder to your ComfyUI custom_nodes directory
2. Restart ComfyUI
3. Find the `VisualPromptEditor` node in the `kontext_super_prompt/core` category
4. Double-click the node to open the visual editor

## ğŸ® Usage

1. **Add Node**: Place `VisualPromptEditor` in your workflow
2. **Connect Image**: Link your image input to the node
3. **Open Editor**: Double-click the node to launch the interface
4. **Annotate**: Use drawing tools to mark areas of interest
5. **Configure**: Select template category and operation type
6. **Enhance**: Choose constraint and decorative prompts via checkboxes
7. **Generate**: Click "Generate Description" for structured prompts
8. **Export**: Save annotations and use generated prompts in your workflow

## ğŸ”§ Requirements

- ComfyUI (latest version recommended)
- Python 3.7+
- Modern web browser with JavaScript enabled
- 4GB+ RAM for optimal performance

## ğŸ“Š Project Stats

- **Preset Templates**: 70+ FLUX optimized templates (based on official training dataset)
- **Custom Templates**: Unlimited user-defined guidance prompts
- **AI Enhancement Nodes**: 2 intelligent enhancers (Ollama local + API remote)
- **Prompt Database**: 343 constraint and decorative prompts
- **Multi-layer Support**: Unlimited annotation layers and instruction combinations
- **Language Support**: English/Chinese bilingual interface
- **File Size**: ~3.2MB total package
- **Node Count**: 4 core nodes (editor + 2 AI enhancers + seed control)

---

**Version**: v3.0.0 - Kontextè¶…çº§æç¤ºè¯ç‰ˆ  
**Status**: âœ… Production Ready  
**License**: MIT  
**Compatibility**: ComfyUI 0.4.0+